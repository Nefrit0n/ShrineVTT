<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ShrineVTT</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="layout">
      <section class="panel">
        <h1>ShrineVTT</h1>
        <div id="notifications" class="notifications" aria-live="polite"></div>
        <form id="login-form">
          <fieldset>
            <legend>Авторизация</legend>
            <label>
              Логин
              <input
                type="text"
                name="username"
                placeholder="master"
                required
              />
            </label>
            <label>
              Пароль
              <input
                type="password"
                name="password"
                placeholder="masterpass"
                required
              />
            </label>
            <button type="submit">Войти</button>
          </fieldset>
        </form>
        <div class="status">
          <h2>Состояние</h2>
          <ul>
            <li>HTTP: <span id="http-status">offline</span></li>
            <li>WebSocket: <span id="ws-status">disconnected</span></li>
            <li>Роль: <span id="role-status">—</span></li>
          </ul>
        </div>
        <div class="actions">
          <button id="ping-button" type="button" disabled>
            Отправить ping
          </button>
          <button id="announce-button" type="button" disabled>
            Отправить объявление (MASTER)
          </button>
        </div>
        <form id="token-form" class="token-form">
          <fieldset id="token-controls" disabled>
            <legend>Токены (MASTER)</legend>
            <label>
              ID сцены
              <input type="text" name="sceneId" placeholder="scene-id" required />
            </label>
            <label>
              Имя токена
              <input type="text" name="name" placeholder="Герой" required />
            </label>
            <label>
              ID владельца (опционально)
              <input type="text" name="ownerUserId" placeholder="player-1" />
            </label>
            <label>
              URL спрайта (опционально)
              <input
                type="text"
                name="sprite"
                placeholder="https://example.com/token.png"
              />
            </label>
            <div class="token-form-grid">
              <label>
                Клетка X
                <input type="number" name="xCell" required />
              </label>
              <label>
                Клетка Y
                <input type="number" name="yCell" required />
              </label>
            </div>
            <button type="submit">Добавить токен</button>
          </fieldset>
        </form>
        <div class="log" id="event-log"></div>
      </section>
      <section class="canvas-container">
        <div class="canvas-controls">
          <label class="canvas-toggle">
            <input type="checkbox" id="grid-toggle" checked />
            <span>Показывать сетку</span>
          </label>
          <div class="canvas-scale">Масштаб: <span id="scale-indicator">100%</span></div>
        </div>
        <canvas id="scene"></canvas>
      </section>
    </main>
    <script type="module" src="./main.ts"></script>
  </body>
</html>
